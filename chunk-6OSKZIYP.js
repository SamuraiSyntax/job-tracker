import{b as S,c as p,d as w,e as C,g as y,i as N,j as E,p as I,r as L,t as P}from"./chunk-F5KVGNR4.js";import{a as b}from"./chunk-NLQMN3YP.js";import{b as _,c as x}from"./chunk-WHOM42OJ.js";import"./chunk-RQZONDFQ.js";import{c as g,h as v,p as h,v as F}from"./chunk-3CWFEXN7.js";import{Aa as t,Bb as s,Ja as o,Oa as u,Ta as c,eb as r,fb as a,gb as n,hb as d,pb as f}from"./chunk-536N3UDQ.js";function G(m,l){m&1&&d(0,"span",9)}var D=class m{constructor(l,i,e,R){this.fb=l;this.authService=i;this.notification=e;this.router=R;this.forgotForm=this.fb.group({email:["",[p.required,p.email]]})}forgotForm;isLoading=!1;submitted=!1;get email(){return this.forgotForm.get("email")}onSubmit(){this.submitted=!0,!this.forgotForm.invalid&&(this.isLoading=!0,this.authService.forgotPassword(this.email?.value).subscribe({next:()=>{this.notification.success("Un email de r\xE9initialisation a \xE9t\xE9 envoy\xE9 si l\u2019adresse existe."),this.isLoading=!1,this.router.navigate(["/auth/reset-password"],{queryParams:{email:this.email?.value}})},error:()=>{this.notification.error("Erreur lors de la demande de r\xE9initialisation."),this.isLoading=!1}}))}static \u0275fac=function(i){return new(i||m)(o(L),o(b),o(F),o(h))};static \u0275cmp=u({type:m,selectors:[["app-forgot-password"]],decls:13,vars:4,consts:[["title","Mot de passe oubli\xE9","subtitle","Recevez un lien de r\xE9initialisation par email"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","w-full"],["fieldName","L'email",3,"control"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin rounded-full border-2 border-white border-t-transparent w-5 h-5 mr-2",4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/auth/login",1,"text-sm","text-indigo-600","hover:underline"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5","mr-2"]],template:function(i,e){i&1&&(a(0,"app-auth-card",0)(1,"form",1),f("ngSubmit",function(){return e.onSubmit()}),a(2,"div")(3,"label",2),s(4,"Email"),n(),d(5,"input",3)(6,"app-form-field-error",4),n(),a(7,"button",5),c(8,G,1,0,"span",6),s(9," Envoyer le lien "),n(),a(10,"div",7)(11,"a",8),s(12,"Retour \xE0 la connexion"),n()()()()),i&2&&(t(),r("formGroup",e.forgotForm),t(5),r("control",e.email),t(),r("disabled",e.isLoading),t(),r("ngIf",e.isLoading))},dependencies:[v,g,P,y,S,w,C,I,E,N,x,_],encapsulation:2,changeDetection:0})};export{D as ForgotPasswordComponent};
