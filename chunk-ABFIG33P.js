import{b as x,c as D}from"./chunk-D5Z3OYPT.js";import"./chunk-KQ5OUKJ7.js";import{b as C,c as u,d as y,e as N,g as E,i as L,j as R,p as I,r as P,t as _}from"./chunk-VSJU3HT3.js";import{b as S}from"./chunk-JF3B47YD.js";import{M as t,P as o,Q as p,Ua as g,V as c,Za as v,da as r,ea as a,fa as n,fb as h,ga as d,gb as b,jb as F,lb as w,ma as f,xa as s}from"./chunk-6FHC7S6G.js";function A(m,l){m&1&&d(0,"span",9)}var G=class m{constructor(l,i,e,M){this.fb=l;this.authService=i;this.notification=e;this.router=M;this.forgotForm=this.fb.group({email:["",[u.required,u.email]]})}forgotForm;isLoading=!1;submitted=!1;get email(){return this.forgotForm.get("email")}onSubmit(){this.submitted=!0,!this.forgotForm.invalid&&(this.isLoading=!0,this.authService.forgotPassword(this.email?.value).subscribe({next:()=>{this.notification.success("Un email de r\xE9initialisation a \xE9t\xE9 envoy\xE9 si l\u2019adresse existe."),this.isLoading=!1,this.router.navigate(["/auth/reset-password"],{queryParams:{email:this.email?.value}})},error:()=>{this.notification.error("Erreur lors de la demande de r\xE9initialisation."),this.isLoading=!1}}))}static \u0275fac=function(i){return new(i||m)(o(P),o(S),o(w),o(h))};static \u0275cmp=p({type:m,selectors:[["app-forgot-password"]],decls:13,vars:4,consts:[["title","Mot de passe oubli\xE9","subtitle","Recevez un lien de r\xE9initialisation par email"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","w-full"],["fieldName","L'email",3,"control"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],["class","animate-spin rounded-full border-2 border-white border-t-transparent w-5 h-5 mr-2",4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/auth/login",1,"text-sm","text-indigo-600","hover:underline"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5","mr-2"]],template:function(i,e){i&1&&(a(0,"app-auth-card",0)(1,"form",1),f("ngSubmit",function(){return e.onSubmit()}),a(2,"div")(3,"label",2),s(4,"Email"),n(),d(5,"input",3)(6,"app-form-field-error",4),n(),a(7,"button",5),c(8,A,1,0,"span",6),s(9," Envoyer le lien "),n(),a(10,"div",7)(11,"a",8),s(12,"Retour \xE0 la connexion"),n()()()()),i&2&&(t(),r("formGroup",e.forgotForm),t(5),r("control",e.email),t(),r("disabled",e.isLoading),t(),r("ngIf",e.isLoading))},dependencies:[v,g,_,E,C,y,N,I,R,L,D,x,F,b],encapsulation:2,changeDetection:0})};export{G as ForgotPasswordComponent};
