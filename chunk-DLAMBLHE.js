import{a as q,b as A}from"./chunk-JUSWF2QN.js";import{b as _,c as d,d as N,e as D,g as P,i as T,j as G,p as R,q as M,s as V}from"./chunk-7ADNDGLF.js";import"./chunk-L7NSMFYP.js";import{a as L}from"./chunk-Q5BYYZIJ.js";import{a as E}from"./chunk-SRQFRWIL.js";import{b as z,c as j}from"./chunk-4BM6LXSI.js";import"./chunk-JC6L6OUE.js";import"./chunk-GELJSVIF.js";import{h as C,p as w,q as F,t as x,v as k}from"./chunk-HSD5PGD6.js";import{Ba as a,Bb as S,Cb as l,Pa as v,S as s,a as f,ab as y,b as g,ba as h,bb as b,fb as p,gb as e,hb as i,ib as o,qb as u}from"./chunk-SJ4FYXJN.js";function J(m,r){m&1&&(o(0,"div",17),e(1,"span"),l(2,"Connexion..."),i())}function O(m,r){m&1&&(o(0,"i",18),e(1,"span"),l(2,"Se connecter"),i())}var B=class m{fb=s(M);authService=s(L);router=s(w);notificationService=s(k);destroyRef=s(h);loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});isLoading=!1;hidePassword=!0;async onSubmit(){if(this.loginForm.valid){this.isLoading=!0;let r=this.loginForm.value,n=q(6),t=A(r.password,n),c=g(f({},r),{password:t});this.authService.login(c).pipe(E(this.destroyRef)).subscribe({next:()=>{this.notificationService.success("Connexion r\xE9ussie ! Bienvenue \u{1F389}"),this.router.navigate(["/dashboard"])},error:I=>{this.notificationService.error(I.message||"Email ou mot de passe incorrect"),this.isLoading=!1}})}else this.markFormGroupTouched(this.loginForm),this.notificationService.warning("Veuillez remplir correctement tous les champs")}markFormGroupTouched(r){Object.keys(r.controls).forEach(n=>{r.get(n)?.markAsTouched()})}static \u0275fac=function(n){return new(n||m)};static \u0275cmp=v({type:m,selectors:[["app-login"]],decls:28,vars:8,consts:[["title","Connexion","subtitle","Connectez-vous \xE0 votre compte Job Tracker"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"form-label"],[1,"relative"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","pl-10"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"fas","fa-envelope"],["fieldName","L'email",3,"control"],["for","password",1,"form-label"],["id","password","formControlName","password","required","","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input","pl-10","pr-10",3,"type"],[1,"fas","fa-lock"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fieldName","Le mot de passe",3,"control"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/register",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5"],[1,"fas","fa-sign-in-alt"]],template:function(n,t){n&1&&(e(0,"app-auth-card",0)(1,"form",1),u("ngSubmit",function(){return t.onSubmit()}),e(2,"div")(3,"label",2),l(4,"Email"),i(),e(5,"div",3),o(6,"input",4),e(7,"span",5),o(8,"i",6),i()(),o(9,"app-form-field-error",7),i(),e(10,"div")(11,"label",8),l(12,"Mot de passe"),i(),e(13,"div",3),o(14,"input",9),e(15,"span",5),o(16,"i",10),i(),e(17,"button",11),u("click",function(){return t.hidePassword=!t.hidePassword}),o(18,"i"),i()(),o(19,"app-form-field-error",12),i(),e(20,"button",13),y(21,J,3,0)(22,O,3,0),i(),e(23,"div",14)(24,"p",15),l(25," Pas encore de compte ? "),e(26,"a",16),l(27,"Inscrivez-vous"),i()()()()()),n&2&&(a(),p("formGroup",t.loginForm),a(8),p("control",t.loginForm.get("email")),a(5),p("type",t.hidePassword?"password":"text"),a(4),S(t.hidePassword?"far fa-eye-slash":"far fa-eye"),a(),p("control",t.loginForm.get("password")),a(),p("disabled",t.isLoading),a(),b(t.isLoading?21:22))},dependencies:[C,V,P,_,N,D,R,G,T,x,F,j,z],encapsulation:2,changeDetection:0})};export{B as LoginComponent};
