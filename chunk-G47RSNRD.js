import{b as L,c as d,d as k,e as E,g as _,i as N,j as D,p as T,q as G,s as R}from"./chunk-BGRY4V54.js";import"./chunk-ZRTXXNTS.js";import{a as F}from"./chunk-C2IPSNV6.js";import{a as x}from"./chunk-HO4B2M3A.js";import{b as M,c as P}from"./chunk-VO3WMZ7W.js";import"./chunk-JY3TYQXN.js";import"./chunk-6T2FLOJ2.js";import{g as y,o as b,p as S,s as C,u as w}from"./chunk-ETI2QEAY.js";import{$ as c,Ma as f,Q as s,Ya as g,Za as v,bb as p,cb as e,db as t,eb as o,mb as u,xb as h,yb as a,za as n}from"./chunk-G3X2Z5OP.js";function A(l,r){l&1&&(o(0,"div",17),e(1,"span"),a(2,"Connexion..."),t())}function z(l,r){l&1&&(o(0,"i",18),e(1,"span"),a(2,"Se connecter"),t())}var q=class l{fb=s(G);authService=s(F);router=s(b);notificationService=s(w);destroyRef=s(c);loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});isLoading=!1;hidePassword=!0;onSubmit(){this.loginForm.valid?(this.isLoading=!0,this.authService.login(this.loginForm.value).pipe(x(this.destroyRef)).subscribe({next:()=>{this.notificationService.success("Connexion r\xE9ussie ! Bienvenue \u{1F389}"),this.router.navigate(["/dashboard"])},error:r=>{this.notificationService.error(r.message||"Email ou mot de passe incorrect"),this.isLoading=!1}})):(this.markFormGroupTouched(this.loginForm),this.notificationService.warning("Veuillez remplir correctement tous les champs"))}markFormGroupTouched(r){Object.keys(r.controls).forEach(m=>{r.get(m)?.markAsTouched()})}static \u0275fac=function(m){return new(m||l)};static \u0275cmp=f({type:l,selectors:[["app-login"]],decls:28,vars:8,consts:[["title","Connexion","subtitle","Connectez-vous \xE0 votre compte Job Tracker"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"form-label"],[1,"relative"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","pl-10"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"fas","fa-envelope"],["fieldName","L'email",3,"control"],["for","password",1,"form-label"],["id","password","formControlName","password","required","","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input","pl-10","pr-10",3,"type"],[1,"fas","fa-lock"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fieldName","Le mot de passe",3,"control"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/register",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5"],[1,"fas","fa-sign-in-alt"]],template:function(m,i){m&1&&(e(0,"app-auth-card",0)(1,"form",1),u("ngSubmit",function(){return i.onSubmit()}),e(2,"div")(3,"label",2),a(4,"Email"),t(),e(5,"div",3),o(6,"input",4),e(7,"span",5),o(8,"i",6),t()(),o(9,"app-form-field-error",7),t(),e(10,"div")(11,"label",8),a(12,"Mot de passe"),t(),e(13,"div",3),o(14,"input",9),e(15,"span",5),o(16,"i",10),t(),e(17,"button",11),u("click",function(){return i.hidePassword=!i.hidePassword}),o(18,"i"),t()(),o(19,"app-form-field-error",12),t(),e(20,"button",13),g(21,A,3,0)(22,z,3,0),t(),e(23,"div",14)(24,"p",15),a(25," Pas encore de compte ? "),e(26,"a",16),a(27,"Inscrivez-vous"),t()()()()()),m&2&&(n(),p("formGroup",i.loginForm),n(8),p("control",i.loginForm.get("email")),n(5),p("type",i.hidePassword?"password":"text"),n(4),h(i.hidePassword?"far fa-eye-slash":"far fa-eye"),n(),p("control",i.loginForm.get("password")),n(),p("disabled",i.isLoading),n(),v(i.isLoading?21:22))},dependencies:[y,R,_,L,k,E,T,D,N,C,S,P,M],encapsulation:2,changeDetection:0})};export{q as LoginComponent};
