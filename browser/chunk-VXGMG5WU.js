import{b as O,c as p,d as $,e as z,g as H,i as J,j as K,q as Q,s as W}from"./chunk-XJ6M2JNX.js";import"./chunk-HMKQALKV.js";import{a as R}from"./chunk-Z56NGVK5.js";import{b as X}from"./chunk-KH6RUNCZ.js";import"./chunk-PLCYP2B4.js";import"./chunk-B7OGBIUI.js";import{g as j,o as B,u as q}from"./chunk-MZ3ZLVUR.js";import{Ab as E,Bb as G,Ma as P,Q as u,Qb as y,V as v,W as _,Ya as c,Za as g,bb as s,cb as e,db as t,eb as l,ga as f,ib as h,mb as b,ob as x,wb as L,xb as V,yb as n,za as o,zb as T}from"./chunk-G3X2Z5OP.js";function Z(m,r){if(m&1){let a=h();e(0,"button",44),b("click",function(){v(a);let d=x();return _(d.toggleEditMode())}),l(1,"i",45),n(2," Modifier le profil "),t()}}function ee(m,r){m&1&&l(0,"i",48)}function te(m,r){m&1&&l(0,"i",49)}function ie(m,r){if(m&1){let a=h();e(0,"div",30)(1,"button",46),b("click",function(){v(a);let d=x();return _(d.toggleEditMode())}),n(2," Annuler "),t(),e(3,"button",47),c(4,ee,1,0,"i",48)(5,te,1,0,"i",49),n(6," Enregistrer "),t()()}if(m&2){let a=x();o(),s("disabled",a.isLoading()),o(2),s("disabled",a.profileForm.invalid||a.isLoading()),o(),g(a.isLoading()?4:5)}}var Y=class m{fb=u(Q);authService=u(R);notificationService=u(q);router=u(B);profileForm;currentUser=f(null);isLoading=f(!1);isEditMode=f(!1);initials=y(()=>{let r=this.currentUser();if(!r)return"";let a=r.prenom?.charAt(0)||"",i=r.nom?.charAt(0)||"";return`${a}${i}`.toUpperCase()});roleBadgeColor=y(()=>this.currentUser()?.role==="ADMIN"?"accent":"primary");ngOnInit(){let r=this.authService.getCurrentUser();if(this.currentUser.set(r),!r){this.router.navigate(["/auth/login"]);return}this.initForm()}initForm(){let r=this.currentUser();this.profileForm=this.fb.group({nom:[{value:r?.nom||"",disabled:!0},[p.required,p.minLength(2)]],prenom:[{value:r?.prenom||"",disabled:!0},[p.required,p.minLength(2)]],email:[{value:r?.email||"",disabled:!0},[p.required,p.email]],role:[{value:r?.role||"",disabled:!0}]})}toggleEditMode(){if(this.isEditMode.update(r=>!r),this.isEditMode())this.profileForm.get("nom")?.enable(),this.profileForm.get("prenom")?.enable(),this.profileForm.get("email")?.enable();else{let r=this.currentUser();this.profileForm.patchValue({nom:r?.nom,prenom:r?.prenom,email:r?.email}),this.profileForm.get("nom")?.disable(),this.profileForm.get("prenom")?.disable(),this.profileForm.get("email")?.disable()}}onSubmit(){this.profileForm.valid&&this.isEditMode()&&(this.isLoading.set(!0),setTimeout(()=>{this.notificationService.success("Profil mis \xE0 jour avec succ\xE8s"),this.isLoading.set(!1),this.isEditMode.set(!1),this.profileForm.disable()},1e3))}getInitials(){return this.initials()}getRoleBadgeColor(){return this.roleBadgeColor()}static \u0275fac=function(a){return new(a||m)};static \u0275cmp=P({type:m,selectors:[["app-profile"]],decls:80,vars:29,consts:[[1,"max-w-7xl","mx-auto","p-6"],[1,"card","mb-8"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-6"],[1,"flex","items-center","gap-6"],[1,"w-24","h-24","rounded-full","bg-gradient-to-br","from-primary-500","to-primary-700","flex","items-center","justify-center","text-white","text-3xl","font-bold","shadow-lg"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","mb-1"],[1,"text-gray-600","dark:text-gray-400","mb-2"],[1,"inline-flex","items-center","gap-2","px-3","py-1","rounded-full","text-sm","font-medium"],[1,"btn-primary","cursor-pointer","disabled:cursor-not-allowed"],[1,"mb-6"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center","gap-2"],[1,"fas","fa-user-circle","text-primary-600","dark:text-primary-400"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","prenom",1,"form-label"],[1,"relative"],[1,"fas","fa-user","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],["id","prenom","type","text","formControlName","prenom","placeholder","Votre pr\xE9nom",1,"form-input","pl-10"],["fieldName","Le pr\xE9nom",3,"control"],["for","nom",1,"form-label"],[1,"fas","fa-id-badge","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],["id","nom","type","text","formControlName","nom","placeholder","Votre nom",1,"form-input","pl-10"],["fieldName","Le nom",3,"control"],["for","email",1,"form-label"],[1,"fas","fa-envelope","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],["id","email","type","email","formControlName","email","placeholder","votre@email.com",1,"form-input","pl-10"],["fieldName","L'email",3,"control"],["for","role",1,"form-label"],[1,"fas","fa-shield-alt","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],["id","role","type","text","formControlName","role","placeholder","R\xF4le",1,"form-input","pl-10"],[1,"flex","justify-end","gap-3"],[1,"card"],[1,"fas","fa-chart-bar","text-primary-600","dark:text-primary-400"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"text-center","p-4","rounded-lg","bg-purple-50","dark:bg-purple-900/20"],[1,"fas","fa-briefcase","text-3xl","text-purple-600","dark:text-purple-400","mb-2"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"text-center","p-4","rounded-lg","bg-orange-50","dark:bg-orange-900/20"],[1,"fas","fa-clock","text-3xl","text-orange-600","dark:text-orange-400","mb-2"],[1,"text-center","p-4","rounded-lg","bg-green-50","dark:bg-green-900/20"],[1,"fas","fa-check-circle","text-3xl","text-green-600","dark:text-green-400","mb-2"],[1,"text-center","p-4","rounded-lg","bg-blue-50","dark:bg-blue-900/20"],[1,"fas","fa-calendar-check","text-3xl","text-blue-600","dark:text-blue-400","mb-2"],[1,"btn-primary","cursor-pointer","disabled:cursor-not-allowed",3,"click"],[1,"fas","fa-edit"],["type","button",1,"btn-outline","cursor-pointer","disabled:cursor-not-allowed",3,"click","disabled"],["type","submit",1,"btn-primary","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-save"]],template:function(a,i){if(a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),n(5),t(),e(6,"div")(7,"h1",5),n(8),t(),e(9,"p",6),n(10),t(),e(11,"span",7),l(12,"i"),n(13),t()()(),c(14,Z,3,0,"button",8),t()(),e(15,"div",1)(16,"div",9)(17,"h2",10),l(18,"i",11),n(19," Informations personnelles "),t()(),e(20,"form",12),b("ngSubmit",function(){return i.onSubmit()}),e(21,"div",13)(22,"div")(23,"label",14),n(24,"Pr\xE9nom"),t(),e(25,"div",15),l(26,"i",16)(27,"input",17),t(),l(28,"app-form-field-error",18),t(),e(29,"div")(30,"label",19),n(31,"Nom"),t(),e(32,"div",15),l(33,"i",20)(34,"input",21),t(),l(35,"app-form-field-error",22),t()(),e(36,"div")(37,"label",23),n(38,"Email"),t(),e(39,"div",15),l(40,"i",24)(41,"input",25),t(),l(42,"app-form-field-error",26),t(),e(43,"div")(44,"label",27),n(45,"R\xF4le"),t(),e(46,"div",15),l(47,"i",28)(48,"input",29),t()(),c(49,ie,7,3,"div",30),t()(),e(50,"div",31)(51,"div",9)(52,"h2",10),l(53,"i",32),n(54," Statistiques "),t()(),e(55,"div",33)(56,"div",34),l(57,"i",35),e(58,"div",36),n(59,"0"),t(),e(60,"div",37),n(61,"Candidatures"),t()(),e(62,"div",38),l(63,"i",39),e(64,"div",36),n(65,"0"),t(),e(66,"div",37),n(67,"En cours"),t()(),e(68,"div",40),l(69,"i",41),e(70,"div",36),n(71,"0"),t(),e(72,"div",37),n(73,"Accept\xE9es"),t()(),e(74,"div",42),l(75,"i",43),e(76,"div",36),n(77,"0"),t(),e(78,"div",37),n(79,"Entretiens"),t()()()()()),a&2){let d,C,S,M,N,F,k,U,D,I,w,A;o(5),E(" ",i.getInitials()," "),o(3),G(" ",(d=i.currentUser())==null?null:d.prenom," ",(d=i.currentUser())==null?null:d.nom," "),o(2),T((C=i.currentUser())==null?null:C.email),o(),L("bg-purple-100",((S=i.currentUser())==null?null:S.role)==="ADMIN")("text-purple-800",((M=i.currentUser())==null?null:M.role)==="ADMIN")("dark:bg-purple-900/20",((N=i.currentUser())==null?null:N.role)==="ADMIN")("dark:text-purple-400",((F=i.currentUser())==null?null:F.role)==="ADMIN")("bg-blue-100",((k=i.currentUser())==null?null:k.role)!=="ADMIN")("text-blue-800",((U=i.currentUser())==null?null:U.role)!=="ADMIN")("dark:bg-blue-900/20",((D=i.currentUser())==null?null:D.role)!=="ADMIN")("dark:text-blue-400",((I=i.currentUser())==null?null:I.role)!=="ADMIN"),o(),V(((w=i.currentUser())==null?null:w.role)==="ADMIN"?"fas fa-shield-alt":"fas fa-user"),o(),E(" ",(A=i.currentUser())==null?null:A.role," "),o(),g(i.isEditMode()?-1:14),o(6),s("formGroup",i.profileForm),o(8),s("control",i.profileForm.get("prenom")),o(7),s("control",i.profileForm.get("nom")),o(7),s("control",i.profileForm.get("email")),o(7),g(i.isEditMode()?49:-1)}},dependencies:[j,W,H,O,$,z,K,J,X],encapsulation:2,changeDetection:0})};export{Y as ProfileComponent};
