import{b as S,c as p,d as C,e as F,g as y,i as N,j as R,q as E,s as I}from"./chunk-X3VJPWLH.js";import{a as b}from"./chunk-EGH6R6HE.js";import{b as M,c as x}from"./chunk-UZH6KNZU.js";import"./chunk-NNFQBPQK.js";import{c as w,h as v,n as h,p as g,v as P}from"./chunk-WCQLCWXR.js";import{Ab as m,Ia as s,Na as u,Sa as c,db as n,eb as a,fb as o,gb as l,ob as f,za as i}from"./chunk-7SIT5ZTB.js";function k(d,t){d&1&&(a(0,"div",9),m(1," Les mots de passe ne correspondent pas "),o())}var A=class d{constructor(t,r,e,_,D){this.fb=t;this.route=r;this.authService=e;this.notification=_;this.router=D;this.resetForm=this.fb.group({newPassword:["",[p.required,p.minLength(8)]],confirmPassword:["",[p.required]]},{validators:this.passwordsMatchValidator}),this.token=this.route.snapshot.queryParamMap.get("token")}resetForm;isLoading=!1;submitted=!1;token=null;get newPassword(){return this.resetForm.get("newPassword")}get confirmPassword(){return this.resetForm.get("confirmPassword")}passwordsMatchValidator(t){let r=t.get("newPassword")?.value,e=t.get("confirmPassword")?.value;return r===e?null:{passwordMismatch:!0}}onSubmit(){this.submitted=!0,!(this.resetForm.invalid||!this.token)&&(this.isLoading=!0,this.authService.resetPassword(this.token,this.newPassword?.value).subscribe({next:()=>{this.notification.success("Votre mot de passe a \xE9t\xE9 r\xE9initialis\xE9 avec succ\xE8s."),this.isLoading=!1,this.router.navigate(["/auth/login"])},error:t=>{this.notification.error(t?.message||"Erreur lors de la r\xE9initialisation."),this.isLoading=!1}}))}static \u0275fac=function(r){return new(r||d)(s(E),s(h),s(b),s(P),s(g))};static \u0275cmp=u({type:d,selectors:[["app-reset-password"]],decls:15,vars:5,consts:[["title","R\xE9initialisation du mot de passe","subtitle","Choisissez un nouveau mot de passe"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","newPassword",1,"block","text-sm","font-medium","mb-2"],["id","newPassword","type","password","formControlName","newPassword",1,"w-full","px-4","py-2","border","rounded-lg"],[3,"control"],["for","confirmPassword",1,"block","text-sm","font-medium","mb-2"],["id","confirmPassword","type","password","formControlName","confirmPassword",1,"w-full","px-4","py-2","border","rounded-lg"],["class","text-sm text-red-600",4,"ngIf"],["type","submit",1,"w-full","py-2","bg-primary-600","text-white","rounded-lg",3,"disabled"],[1,"text-sm","text-red-600"]],template:function(r,e){r&1&&(a(0,"app-auth-card",0)(1,"form",1),f("ngSubmit",function(){return e.onSubmit()}),a(2,"div")(3,"label",2),m(4,"Nouveau mot de passe"),o(),l(5,"input",3)(6,"app-form-field-error",4),o(),a(7,"div")(8,"label",5),m(9,"Confirmer le mot de passe"),o(),l(10,"input",6)(11,"app-form-field-error",4),o(),c(12,k,2,0,"div",7),a(13,"button",8),m(14," R\xE9initialiser le mot de passe "),o()()()),r&2&&(i(),n("formGroup",e.resetForm),i(5),n("control",e.newPassword),i(5),n("control",e.confirmPassword),i(),n("ngIf",e.resetForm.hasError("passwordMismatch")&&(e.confirmPassword==null?null:e.confirmPassword.touched)),i(),n("disabled",e.resetForm.invalid||e.isLoading))},dependencies:[v,w,I,y,S,C,F,R,N,x,M],encapsulation:2,changeDetection:0})};export{A as ResetPasswordComponent};
