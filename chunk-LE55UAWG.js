import{a as U,b as $}from"./chunk-JUSWF2QN.js";import{b as P,c as m,d as V,e as G,g as M,i as I,j,p as z,q as O,s as B}from"./chunk-7ADNDGLF.js";import"./chunk-L7NSMFYP.js";import{a as D}from"./chunk-Q5BYYZIJ.js";import{a as A}from"./chunk-SRQFRWIL.js";import{b as Z,c as H}from"./chunk-4BM6LXSI.js";import"./chunk-JC6L6OUE.js";import"./chunk-GELJSVIF.js";import{Z as J,b as x,c as N,h as R,p as k,q as L,t as T,v as q}from"./chunk-HSD5PGD6.js";import{Ba as a,Bb as C,Cb as p,Db as E,Nb as F,Pa as y,S as c,Ua as b,a as g,ab as S,b as h,ba as v,bb as w,fb as l,gb as i,hb as o,ib as n,qb as f,zb as _}from"./chunk-SJ4FYXJN.js";var Q=(s,e,t,r)=>({"bg-red-500":s,"bg-yellow-400":e,"bg-blue-400":t,"bg-green-500":r});function W(s,e){if(s&1&&(i(0,"li"),p(1),o()),s&2){let t=e.$implicit;a(),E(t)}}function X(s,e){s&1&&(n(0,"div",30),i(1,"span"),p(2,"Inscription en cours..."),o())}function Y(s,e){s&1&&(n(0,"i",31),i(1,"span"),p(2,"S'inscrire"),o())}var K=class s{fb=c(O);authService=c(D);router=c(k);notificationService=c(q);destroyRef=c(v);registerForm=this.fb.group({nom:["",[m.required,m.minLength(2),m.maxLength(50)]],prenom:["",[m.required,m.minLength(2),m.maxLength(50)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(8),J()]]});get passwordStrength(){let e=this.registerForm.get("password")?.value||"",t=0;return e.length>=8&&t++,/[A-Z]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(e)&&t++,t}get passwordErrors(){let e=this.registerForm.get("password")?.errors;if(!e)return[];let t=[];return e.required&&t.push("Le mot de passe est requis."),e.minLength&&t.push("Au moins 8 caract\xE8res."),e.uppercase&&t.push("Au moins une majuscule."),e.lowercase&&t.push("Au moins une minuscule."),e.digit&&t.push("Au moins un chiffre."),e.special&&t.push("Au moins un caract\xE8re sp\xE9cial."),t}isLoading=!1;hidePassword=!0;async onSubmit(){if(this.registerForm.valid){this.isLoading=!0;let e=this.registerForm.value,t=U(6),r=$(e.password,t),u=h(g({},e),{password:r});this.authService.register(u).pipe(A(this.destroyRef)).subscribe({next:()=>{this.notificationService.success("Inscription r\xE9ussie ! Bienvenue \u{1F389}"),this.router.navigate(["/dashboard"])},error:d=>{this.notificationService.error(d.message||"Une erreur est survenue lors de l'inscription"),this.isLoading=!1}})}else this.markFormGroupTouched(this.registerForm),this.notificationService.warning("Veuillez remplir correctement tous les champs")}markFormGroupTouched(e){Object.keys(e.controls).forEach(t=>{e.get(t)?.markAsTouched()})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=y({type:s,selectors:[["app-register"]],decls:49,vars:19,consts:[["title","Inscription","subtitle","Cr\xE9ez votre compte Job Tracker"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","nom",1,"form-label"],[1,"relative"],["id","nom","type","text","formControlName","nom","required","","autocomplete","family-name","placeholder","Votre nom",1,"form-input","pl-10"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"fas","fa-user"],["fieldName","Le nom",3,"control"],["for","prenom",1,"form-label"],["id","prenom","type","text","formControlName","prenom","required","","autocomplete","given-name","placeholder","Votre pr\xE9nom",1,"form-input","pl-10"],[1,"far","fa-user"],["fieldName","Le pr\xE9nom",3,"control"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","pl-10"],[1,"fas","fa-envelope"],["fieldName","L'email",3,"control"],["for","password",1,"form-label"],["id","password","formControlName","password","required","","autocomplete","new-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input","pl-10","pr-10",3,"copy","paste","cut","type"],[1,"fas","fa-lock"],["type","button","tabindex","-1",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],[1,"mt-2"],[1,"h-2","rounded","bg-gray-200","dark:bg-gray-700","overflow-hidden"],[1,"h-2","transition-all",3,"ngClass"],[1,"text-xs","mt-1","text-gray-500","dark:text-gray-400"],[4,"ngFor","ngForOf"],["fieldName","Le mot de passe",3,"control"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/login",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5"],[1,"fas","fa-user-plus"]],template:function(t,r){t&1&&(i(0,"app-auth-card",0)(1,"form",1),f("ngSubmit",function(){return r.onSubmit()}),i(2,"div")(3,"label",2),p(4,"Nom"),o(),i(5,"div",3),n(6,"input",4),i(7,"span",5),n(8,"i",6),o()(),n(9,"app-form-field-error",7),o(),i(10,"div")(11,"label",8),p(12,"Pr\xE9nom"),o(),i(13,"div",3),n(14,"input",9),i(15,"span",5),n(16,"i",10),o()(),n(17,"app-form-field-error",11),o(),i(18,"div")(19,"label",12),p(20,"Email"),o(),i(21,"div",3),n(22,"input",13),i(23,"span",5),n(24,"i",14),o()(),n(25,"app-form-field-error",15),o(),i(26,"div")(27,"label",16),p(28,"Mot de passe"),o(),i(29,"div",3)(30,"input",17),f("copy",function(d){return d.preventDefault()})("paste",function(d){return d.preventDefault()})("cut",function(d){return d.preventDefault()}),o(),i(31,"span",5),n(32,"i",18),o(),i(33,"button",19),f("click",function(){return r.hidePassword=!r.hidePassword}),n(34,"i"),o()(),i(35,"div",20)(36,"div",21),n(37,"div",22),o(),i(38,"ul",23),b(39,W,2,1,"li",24),o()(),n(40,"app-form-field-error",25),o(),i(41,"button",26),S(42,X,3,0)(43,Y,3,0),o(),i(44,"div",27)(45,"p",28),p(46," Vous avez d\xE9j\xE0 un compte ? "),i(47,"a",29),p(48,"Se connecter"),o()()()()()),t&2&&(a(),l("formGroup",r.registerForm),a(8),l("control",r.registerForm.get("nom")),a(8),l("control",r.registerForm.get("prenom")),a(8),l("control",r.registerForm.get("email")),a(5),l("type",r.hidePassword?"password":"text"),a(4),C(r.hidePassword?"far fa-eye-slash":"far fa-eye"),a(3),_("width",r.passwordStrength*20+"%"),l("ngClass",F(14,Q,r.passwordStrength<=2,r.passwordStrength===3,r.passwordStrength===4,r.passwordStrength===5)),a(2),l("ngForOf",r.passwordErrors),a(),l("control",r.registerForm.get("password")),a(),l("disabled",r.isLoading),a(),w(r.isLoading?42:43))},dependencies:[R,x,N,B,M,P,V,G,z,j,I,T,L,H,Z],encapsulation:2,changeDetection:0})};export{K as RegisterComponent};
