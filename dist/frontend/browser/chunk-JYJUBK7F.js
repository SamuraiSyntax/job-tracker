import{a as F}from"./chunk-MG4VIRUQ.js";import"./chunk-VYZIJS7G.js";import{b as E,c as d,d as L,e as k,g as _,i as N,j as D,p as T,r as G,t as M}from"./chunk-RGSRR5HZ.js";import{a as x}from"./chunk-QUIS4U7J.js";import"./chunk-B23ZCHLO.js";import{b as P,c as R}from"./chunk-QZVPFBDY.js";import"./chunk-WMIV6HCU.js";import{h as y,p as b,q as S,t as C,v as w}from"./chunk-UO6RE5ZL.js";import{$ as c,$a as g,Aa as a,Ab as h,Bb as l,Oa as f,S as s,ab as v,eb as p,fb as e,gb as t,hb as r,pb as u}from"./chunk-536N3UDQ.js";function q(m,n){m&1&&(r(0,"div",19),e(1,"span"),l(2,"Connexion..."),t())}function z(m,n){m&1&&(r(0,"i",20),e(1,"span"),l(2,"Se connecter"),t())}var A=class m{fb=s(G);authService=s(x);router=s(b);notificationService=s(w);destroyRef=s(c);loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]});isLoading=!1;hidePassword=!0;async onSubmit(){if(this.loginForm.valid){this.isLoading=!0;let n=this.loginForm.value;this.authService.login(n).pipe(F(this.destroyRef)).subscribe({next:o=>{this.authService.handleAuthentication(o),this.notificationService.success('Connexion r\xE9ussie ! Bienvenue <i class="fas fa-smile-beam"></i>'),this.router.navigate(["/dashboard"])},error:o=>{this.notificationService.error(o.message||"Email ou mot de passe incorrect"),this.isLoading=!1}})}else this.markFormGroupTouched(this.loginForm),this.notificationService.warning("Veuillez remplir correctement tous les champs")}markFormGroupTouched(n){Object.keys(n.controls).forEach(o=>{n.get(o)?.markAsTouched()})}static \u0275fac=function(o){return new(o||m)};static \u0275cmp=f({type:m,selectors:[["app-login"]],decls:31,vars:8,consts:[["title","Connexion","subtitle","Connectez-vous \xE0 votre compte Job Tracker"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","email",1,"form-label"],[1,"relative"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","pl-10"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"fas","fa-envelope"],["fieldName","L'email",3,"control"],["for","password",1,"form-label"],["id","password","formControlName","password","required","","autocomplete","current-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input","pl-10","pr-10",3,"type"],[1,"fas","fa-lock"],["type","button",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],["fieldName","Le mot de passe",3,"control"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center","mt-2"],["routerLink","/auth/forgot-password",1,"text-sm","text-indigo-600","hover:underline","focus:outline-none","focus:underline"],[1,"text-center","mt-4"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/register",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5"],[1,"fas","fa-sign-in-alt"]],template:function(o,i){o&1&&(e(0,"app-auth-card",0)(1,"form",1),u("ngSubmit",function(){return i.onSubmit()}),e(2,"div")(3,"label",2),l(4,"Email"),t(),e(5,"div",3),r(6,"input",4),e(7,"span",5),r(8,"i",6),t()(),r(9,"app-form-field-error",7),t(),e(10,"div")(11,"label",8),l(12,"Mot de passe"),t(),e(13,"div",3),r(14,"input",9),e(15,"span",5),r(16,"i",10),t(),e(17,"button",11),u("click",function(){return i.hidePassword=!i.hidePassword}),r(18,"i"),t()(),r(19,"app-form-field-error",12),t(),e(20,"button",13),g(21,q,3,0)(22,z,3,0),t(),e(23,"div",14)(24,"a",15),l(25," Mot de passe oubli\xE9\xA0? "),t()(),e(26,"div",16)(27,"p",17),l(28," Pas encore de compte ? "),e(29,"a",18),l(30,"Inscrivez-vous"),t()()()()()),o&2&&(a(),p("formGroup",i.loginForm),a(8),p("control",i.loginForm.get("email")),a(5),p("type",i.hidePassword?"password":"text"),a(4),h(i.hidePassword?"far fa-eye-slash":"far fa-eye"),a(),p("control",i.loginForm.get("password")),a(),p("disabled",i.isLoading),a(),v(i.isLoading?21:22))},dependencies:[y,M,_,E,L,k,T,D,N,C,S,R,P],encapsulation:2,changeDetection:0})};export{A as LoginComponent};
