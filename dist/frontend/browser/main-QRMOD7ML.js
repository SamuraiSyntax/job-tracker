import{a as s}from"./chunk-4C3HRV63.js";import{d as Q,e as q,f as ee,g as te,h as oe}from"./chunk-LJ45HFU7.js";import"./chunk-WJQ5EDSO.js";import{h as J,i as W,j as Y,l as X,m as Z,o as $,p as h,s as K,v as g}from"./chunk-CJVXGS2H.js";import{$a as U,A as b,Da as k,Ga as O,Ja as j,K as w,N as R,Na as V,Q as F,S as a,Sb as A,T as x,X as v,Y as C,Z as I,_ as T,_a as H,ca as M,db as z,eb as m,fa as E,fb as d,ga as N,gb as c,ha as D,kb as L,o as S,ob as B,qb as u,ta as P,yb as G,za as y}from"./chunk-7SIT5ZTB.js";var de="@",ce=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(I);loadingSchedulerFn=a(me,{optional:!0});_engine;constructor(e,n,r,i,p){this.doc=e,this.delegate=n,this.zone=r,this.animationType=i,this.moduleImpl=p}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-OQG3FX44.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new w(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let p=new i(this.delegate,this._engine,this.zone);return this.delegate=p,p})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new _(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(p=>{let pe=p.createRenderer(e,n);i.use(pe),this.scheduler??=this.injector.get(D,null,{optional:!0}),this.scheduler?.notify(10)}).catch(p=>{i.use(r)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){j()};static \u0275prov=R({token:t,factory:t.\u0275fac})}return t})(),_=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,n,r){this.delegate.insertBefore(o,e,n,r)}removeChild(o,e,n,r){this.delegate.removeChild(o,e,n,r)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,n,r){this.delegate.setAttribute(o,e,n,r)}removeAttribute(o,e,n){this.delegate.removeAttribute(o,e,n)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,n,r){this.delegate.setStyle(o,e,n,r)}removeStyle(o,e,n){this.delegate.removeStyle(o,e,n)}setProperty(o,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(o,e,n)),this.delegate.setProperty(o,e,n)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,n,r){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(o,e,n,r)),this.delegate.listen(o,e,n,r)}shouldReplay(o){return this.replay!==null&&o.startsWith(de)}},me=new F("");function ne(t="animations"){return k("NgAsyncAnimations"),x([{provide:O,useFactory:()=>new ce(a(T),a(W),a(M),t)},{provide:P,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var l=(t,o)=>{let e=a(s),n=a(h),r=a(g);return e.isAuthenticated()?!0:(r.info("Veuillez vous connecter pour acc\xE9der \xE0 cette page."),n.navigate(["/auth/login"],{queryParams:{returnUrl:o.url}}),!1)};var re=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"auth/login",loadComponent:()=>import("./chunk-JROERB7S.js").then(t=>t.LoginComponent)},{path:"auth/register",loadComponent:()=>import("./chunk-EYBFYMDZ.js").then(t=>t.RegisterComponent)},{path:"auth/forgot-password",loadComponent:()=>import("./chunk-MCWRMNNV.js").then(t=>t.ForgotPasswordComponent)},{path:"auth/reset-password",loadComponent:()=>import("./chunk-4T4CHOS2.js").then(t=>t.ResetPasswordComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-ONUXXLRC.js").then(t=>t.DashboardComponent),canActivate:[l]},{path:"profile",loadComponent:()=>import("./chunk-5UGTL6YX.js").then(t=>t.ProfileComponent),canActivate:[l]},{path:"settings",loadComponent:()=>import("./chunk-AK65WPPU.js").then(t=>t.SettingsComponent),canActivate:[l]},{path:"stats",loadComponent:()=>import("./chunk-DFSL25RG.js").then(t=>t.CandidatureStatsComponent),canActivate:[l]},{path:"candidatures",canActivate:[l],children:[{path:"",loadComponent:()=>import("./chunk-Y2BBM2Q3.js").then(t=>t.CandidatureListComponent)},{path:"new",loadComponent:()=>import("./chunk-PXFLDXCG.js").then(t=>t.CandidatureFormComponent)},{path:":id",loadComponent:()=>import("./chunk-DUQPRMD2.js").then(t=>t.CandidatureDetailComponent)},{path:":id/edit",loadComponent:()=>import("./chunk-PXFLDXCG.js").then(t=>t.CandidatureFormComponent)}]},{path:"**",redirectTo:"/dashboard"}];var ie=(t,o)=>{let n=a(s).getToken();return!n&&!t.url.includes("/auth/")&&console.warn("[JWT] Pas de token JWT pour la requ\xEAte:",t.url),n&&(t=t.clone({setHeaders:{Authorization:`Bearer ${n}`}})),o(t)};var ae=(t,o)=>{let e=a(h),n=a(s),r=a(g);return o(t).pipe(b(i=>(i.status===401?!t.url.includes("/stats/")&&i.error?.message!=="Endpoint not found"?(n.logout(),e.navigate(["/auth/login"]),r.error("Session expir\xE9e. Veuillez vous reconnecter.")):console.warn("[AUTH] Endpoint non disponible:",t.url):i.status===403?(r.error("Acc\xE8s refus\xE9. Vous n'avez pas les permissions n\xE9cessaires."),e.navigate(["/dashboard"])):i.status===404?console.warn("[HTTP] Ressource non trouv\xE9e:",t.url):i.status===429||typeof i.error?.message=="string"&&i.error.message.toLowerCase().includes("trop de tentatives")?r.error("Compte temporairement bloqu\xE9 apr\xE8s trop de tentatives. R\xE9essayez dans 15 minutes."):i.status===500?r.error("Erreur serveur. Veuillez r\xE9essayer plus tard."):i.status===0&&r.error("Erreur de connexion. V\xE9rifiez votre connexion internet."),S(()=>i))))};var se={providers:[E(),K(re),X(Z([ie,ae])),ne()]};function ue(t,o){if(t&1){let e=L();m(0,"div",1)(1,"app-header",2),B("toggleMenu",function(){v(e);let r=u();return C(r.toggleSidenav())})("logoutClick",function(){v(e);let r=u();return C(r.logout())}),d(),m(2,"div",3)(3,"aside",4,0),c(5,"app-sidebar"),d(),m(6,"main",5),c(7,"router-outlet")(8,"app-footer"),d()(),c(9,"app-toast")(10,"app-confirmation-modal"),d()}if(t&2){let e=u();y(),z("currentUser",e.currentUser())("appTitle",e.title()),y(2),G("hidden",!e.sidenavOpen)}}function he(t,o){t&1&&c(0,"router-outlet")(1,"app-toast")(2,"app-confirmation-modal")}var f=class t{authService=a(s);title=N("Job Tracker");isAuthenticated=A(()=>this.authService.isAuthenticated());currentUser=A(()=>this.authService.getCurrentUser());sidenavOpen=!0;toggleSidenav(){this.sidenavOpen=!this.sidenavOpen}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[["sidenav",""],[1,"flex","flex-col","h-screen"],[3,"toggleMenu","logoutClick","currentUser","appTitle"],[1,"flex","flex-1","overflow-hidden"],[1,"w-64","bg-white","dark:bg-gray-800","border-r","border-gray-200","dark:border-gray-700","overflow-y-auto"],[1,"flex-1","overflow-y-auto","bg-gray-50","dark:bg-gray-900"]],template:function(e,n){e&1&&H(0,ue,11,4,"div",1)(1,he,3,0),e&2&&U(n.isAuthenticated()?0:1)},dependencies:[J,$,Q,q,ee,te,oe],encapsulation:2})};Y(f,se).catch(t=>console.error(t));
