import{b as G}from"./chunk-23EWBLYA.js";import{a as H,b as U}from"./chunk-RXXFTO3Q.js";import"./chunk-LJ45HFU7.js";import{A as K,C as Q,a as z,b as J,v as W,y as Y}from"./chunk-WJQ5EDSO.js";import{h as q,q as V,t as B,v as O}from"./chunk-CJVXGS2H.js";import{$a as v,A as P,Ab as n,Bb as c,Cb as u,G as L,Hb as D,Ib as h,Na as A,S as y,Sb as x,X as N,Y as R,_a as b,ab as E,bb as f,cb as C,db as g,eb as i,fb as r,gb as l,ja as F,kb as $,n as T,ob as j,qb as p,s as I,xb as w,y as M,yb as _,za as o}from"./chunk-7SIT5ZTB.js";var Z=()=>[1,2,3,4,5],S=a=>["/candidatures",a],ee=(a,t)=>t.type,te=(a,t)=>t.priorite,k=(a,t)=>t.id;function re(a,t){a&1&&l(0,"app-loading-spinner",5),a&2&&g("fullscreen",!0)}function ie(a,t){if(a&1){let e=$();i(0,"app-error-card",7),j("retry",function(){N(e);let s=p();return R(s.loadData())}),r()}if(a&2){let e=p();g("message",e.errorMessage())}}function ae(a,t){if(a&1&&l(0,"i",54),a&2){let e=t.$implicit,d=p(3);_("text-amber-400",e<=d.scoreStats().average)("dark:text-amber-500",e<=d.scoreStats().average)("text-gray-300",e>d.scoreStats().average)("dark:text-gray-600",e>d.scoreStats().average)}}function ne(a,t){if(a&1&&(i(0,"div",51)(1,"span",55),n(2),r(),i(3,"div",56)(4,"div",57),l(5,"div",58),r(),i(6,"span",59),n(7),r()()()),a&2){let e=t.$implicit,d=p(3);o(2),c(e.type),o(3),w("width",e.percentage,"%"),_("bg-blue-500",d.getTypeContratColor(e.type)==="blue")("bg-purple-500",d.getTypeContratColor(e.type)==="purple")("bg-green-500",d.getTypeContratColor(e.type)==="green")("bg-yellow-500",d.getTypeContratColor(e.type)==="yellow")("bg-indigo-500",d.getTypeContratColor(e.type)==="indigo")("bg-pink-500",d.getTypeContratColor(e.type)==="pink"),o(2),u(" ",e.count," ")}}function oe(a,t){a&1&&(i(0,"p",52),n(1," Aucune donn\xE9e disponible "),r())}function de(a,t){if(a&1&&(i(0,"div",51)(1,"span",55),n(2),r(),i(3,"div",56)(4,"div",57),l(5,"div",58),r(),i(6,"span",59),n(7),r()()()),a&2){let e=t.$implicit,d=p(3);o(2),c(e.priorite),o(3),w("width",e.percentage,"%"),_("bg-red-500",d.getPrioriteColor(e.priorite)==="red")("bg-yellow-500",d.getPrioriteColor(e.priorite)==="yellow")("bg-green-500",d.getPrioriteColor(e.priorite)==="green"),o(2),u(" ",e.count," ")}}function le(a,t){a&1&&(i(0,"p",52),n(1," Aucune donn\xE9e disponible "),r())}function se(a,t){if(a&1&&(i(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),n(4),r(),i(5,"div",30),n(6,"Total"),r()()(),i(7,"div",31)(8,"div",28)(9,"div",32),n(10),r(),i(11,"div",33),n(12,"En cours"),r()()(),i(13,"div",34)(14,"div",28)(15,"div",35),n(16),r(),i(17,"div",36),n(18,"Accept\xE9es"),r()()(),i(19,"div",37)(20,"div",28)(21,"div",38),n(22),r(),i(23,"div",39),n(24,"Entretiens"),r()()()(),i(25,"div",40)(26,"div",41)(27,"div",42)(28,"h3",43),l(29,"i",44),n(30," Score moyen "),r()(),i(31,"div",28)(32,"div",45),n(33),r(),i(34,"div",46),f(35,ae,1,8,"i",47,E),r(),i(37,"p",48),n(38),r()()(),i(39,"div",23)(40,"div",42)(41,"h3",43),l(42,"i",49),n(43," Types de contrat "),r()(),i(44,"div",50),f(45,ne,8,16,"div",51,ee),b(47,oe,2,0,"p",52),r()(),i(48,"div",23)(49,"div",42)(50,"h3",43),l(51,"i",53),n(52," Priorit\xE9s "),r()(),i(53,"div",50),f(54,de,8,10,"div",51,te),b(56,le,2,0,"p",52),r()()()),a&2){let e=p(2);o(4),c(e.stats().totalCandidatures),o(6),c(e.stats().enCours),o(6),c(e.stats().acceptees),o(6),c(e.stats().entretiens),o(11),u(" ",e.scoreStats().average,"/5 "),o(2),C(D(8,Z)),o(3),u(" ",e.scoreStats().count," candidature(s) not\xE9e(s) "),o(7),C(e.typeContratStats()),o(2),v(e.typeContratStats().length===0?47:-1),o(7),C(e.prioriteStats()),o(2),v(e.prioriteStats().length===0?56:-1)}}function me(a,t){if(a&1&&l(0,"i",67),a&2){let e=t.$implicit,d=p().$implicit;_("text-amber-400",e<=(d.score||0))("text-gray-300",e>(d.score||0))}}function pe(a,t){if(a&1&&(i(0,"div",62)(1,"div",51)(2,"div",63)(3,"h3",64),n(4),r(),i(5,"p",15),n(6),r()(),i(7,"div",56)(8,"div",65),f(9,me,1,4,"i",66,E),r()()()()),a&2){let e=t.$implicit;g("routerLink",h(3,S,e.id)),o(4),c(e.poste),o(2),c(e.entreprise),o(3),C(D(5,Z))}}function ce(a,t){if(a&1&&(i(0,"div",23)(1,"div",42)(2,"h2",60),l(3,"i",61),n(4," Top candidatures "),r()(),i(5,"div",50),f(6,pe,11,6,"div",62,k),r()()),a&2){let e=p(2);o(6),C(e.topCandidatures())}}function ue(a,t){if(a&1&&(i(0,"div",69)(1,"div",51)(2,"div",63)(3,"h3",64),n(4),r(),i(5,"div",70)(6,"span",65),l(7,"i",71),n(8),r(),i(9,"span",65),l(10,"i",72),n(11),r()()(),l(12,"app-status-badge",73),r()()),a&2){let e=t.$implicit,d=p(3);g("routerLink",h(5,S,e.id)),o(4),c(e.poste),o(4),u(" ",e.entreprise," "),o(3),u(" ",d.formatDate(e.dateCandidature)," "),o(),g("statut",e.statut)}}function xe(a,t){if(a&1&&(i(0,"div",23)(1,"div",42)(2,"h2",60),l(3,"i",68),n(4," Priorit\xE9 haute "),r()(),i(5,"div",50),f(6,ue,13,7,"div",69,k),r()()),a&2){let e=p(2);o(6),C(e.prioriteCandidatures())}}function ge(a,t){if(a&1&&(i(0,"div",75)(1,"div",51)(2,"div",63)(3,"h3",64),n(4),r(),i(5,"div",70)(6,"span",65),l(7,"i",71),n(8),r(),i(9,"span",76),l(10,"i",77),n(11),r()()(),l(12,"app-status-badge",73),r()()),a&2){let e=t.$implicit,d=p(3);g("routerLink",h(5,S,e.id)),o(4),c(e.poste),o(4),u(" ",e.entreprise," "),o(3),u(" ",d.formatDate(e.dateRelancePrevue)," "),o(),g("statut",e.statut)}}function be(a,t){if(a&1&&(i(0,"div",24)(1,"div",42)(2,"h2",60),l(3,"i",74),n(4," Relances \xE0 pr\xE9voir "),r()(),i(5,"div",50),f(6,ge,13,7,"div",75,k),r()()),a&2){let e=p(2);o(6),C(e.relancesCandidatures())}}function ve(a,t){if(a&1&&(i(0,"div",82)(1,"div",51)(2,"div",63)(3,"h3",64),n(4),r(),i(5,"div",83)(6,"span",65),l(7,"i",71),n(8),r(),i(9,"span",65),l(10,"i",84),n(11),r(),i(12,"span",65),l(13,"i",72),n(14),r()()(),l(15,"app-status-badge",73),r()()),a&2){let e=t.$implicit,d=p(3);g("routerLink",h(6,S,e.id)),o(4),c(e.poste),o(4),u(" ",e.entreprise," "),o(3),u(" ",e.localisation," "),o(3),u(" ",d.formatDate(e.dateCandidature)," "),o(),g("statut",e.statut)}}function fe(a,t){if(a&1&&(i(0,"div",23)(1,"div",78)(2,"h2",60),l(3,"i",79),n(4," Candidatures r\xE9centes "),r(),i(5,"a",80),n(6," Voir tout "),l(7,"i",81),r()(),i(8,"div",50),f(9,ve,16,8,"div",82,k),r()()),a&2){let e=p(2);o(9),C(e.recentCandidatures())}}function Ce(a,t){a&1&&(i(0,"div",25),l(1,"i",85),i(2,"h3",86),n(3,"Aucune candidature"),r(),i(4,"p",87),n(5,"Commencez \xE0 suivre vos candidatures d\xE8s maintenant"),r(),i(6,"button",88),l(7,"i",89),n(8," Cr\xE9er ma premi\xE8re candidature "),r()())}function _e(a,t){if(a&1&&(i(0,"div",8)(1,"button",9)(2,"div",10)(3,"div",11),l(4,"i",12),r(),i(5,"div",13)(6,"h3",14),n(7,"Nouvelle candidature"),r(),i(8,"p",15),n(9,"Ajouter une candidature"),r()()()(),i(10,"button",16)(11,"div",10)(12,"div",17),l(13,"i",18),r(),i(14,"div",13)(15,"h3",14),n(16,"Mes candidatures"),r(),i(17,"p",15),n(18,"Voir toutes mes candidatures"),r()()()(),i(19,"button",19)(20,"div",10)(21,"div",20),l(22,"i",21),r(),i(23,"div",13)(24,"h3",14),n(25,"Statistiques"),r(),i(26,"p",15),n(27,"Analyses d\xE9taill\xE9es"),r()()()()(),b(28,se,57,9),i(29,"div",22),b(30,ce,8,0,"div",23),b(31,xe,8,0,"div",23),r(),b(32,be,8,0,"div",24),b(33,fe,11,0,"div",23)(34,Ce,9,0,"div",25)),a&2){let e=p();o(28),v(e.stats()?28:-1),o(2),v(e.topCandidatures().length>0?30:-1),o(),v(e.prioriteCandidatures().length>0?31:-1),o(),v(e.relancesCandidatures().length>0?32:-1),o(),v(e.recentCandidatures()&&e.recentCandidatures().length>0?33:e.stats()&&e.stats().totalCandidatures===0?34:-1)}}var X=class a{statistiqueService=y(U);candidatureService=y(H);notificationService=y(O);dashboardState=G(M({stats:this.statistiqueService.getStatistiquesGlobales(),candidatures:this.candidatureService.getAllCandidatures()}).pipe(I(t=>({stats:t.stats,allCandidatures:t.candidatures,recentCandidatures:t.candidatures.sort((e,d)=>new Date(d.dateCandidature).getTime()-new Date(e.dateCandidature).getTime()).slice(0,5),loading:!1,error:null})),P(t=>{console.error("Erreur lors du chargement du dashboard",t);let e=Y(t,K,"Impossible de charger les donn\xE9es.");return T({stats:null,recentCandidatures:[],allCandidatures:[],loading:!1,error:e})}),L({stats:null,recentCandidatures:[],allCandidatures:[],loading:!0,error:null})),{requireSync:!0});stats=x(()=>this.dashboardState().stats);recentCandidatures=x(()=>this.dashboardState().recentCandidatures);allCandidatures=x(()=>this.dashboardState().allCandidatures);isLoading=x(()=>this.dashboardState().loading);errorMessage=x(()=>this.dashboardState().error);scoreStats=x(()=>{let t=this.allCandidatures().filter(d=>d.score&&d.score>0);if(t.length===0)return{average:0,count:0};let e=t.reduce((d,s)=>d+(s.score||0),0)/t.length;return{average:Math.round(e*10)/10,count:t.length}});typeContratStats=x(()=>{let t=this.allCandidatures(),e=t.length;if(e===0)return[];let d=t.reduce((s,m)=>(m.typeContrat&&(s[m.typeContrat]=(s[m.typeContrat]||0)+1),s),{});return Object.entries(d).map(([s,m])=>({type:s,count:m,percentage:Math.round(m/e*100)})).sort((s,m)=>m.count-s.count)});prioriteStats=x(()=>{let t=this.allCandidatures(),e=t.filter(s=>s.priorite).length;if(e===0)return[];let d=t.reduce((s,m)=>(m.priorite&&(s[m.priorite]=(s[m.priorite]||0)+1),s),{});return Object.entries(d).map(([s,m])=>({priorite:s,count:m,percentage:Math.round(m/e*100)})).sort((s,m)=>m.count-s.count)});topCandidatures=x(()=>this.allCandidatures().filter(t=>t.score&&t.score>0).sort((t,e)=>(e.score||0)-(t.score||0)).slice(0,5));prioriteCandidatures=x(()=>this.allCandidatures().filter(t=>t.priorite==="HAUTE").sort((t,e)=>new Date(e.dateCandidature).getTime()-new Date(t.dateCandidature).getTime()).slice(0,5));relancesCandidatures=x(()=>{let t=new Date;return this.allCandidatures().filter(e=>e.dateRelancePrevue&&new Date(e.dateRelancePrevue)>=t).sort((e,d)=>new Date(e.dateRelancePrevue).getTime()-new Date(d.dateRelancePrevue).getTime()).slice(0,5)});constructor(){F(()=>{let t=this.errorMessage();t&&this.notificationService.error(t)})}loadData(){window.location.reload()}formatDate(t){return W(t)}getTypeContratColor(t){return{CDI:"blue",CDD:"purple",FREELANCE:"green",STAGE:"yellow",ALTERNANCE:"indigo",INTERIM:"pink"}[t]||"gray"}getPrioriteColor(t){return{HAUTE:"red",MOYENNE:"yellow",BASSE:"green"}[t]||"gray"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=A({type:a,selectors:[["app-dashboard"]],decls:10,vars:1,consts:[[1,"max-w-7xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","flex","items-center","gap-3","mb-2"],[1,"fas","fa-home","text-primary-600","dark:text-primary-400"],[1,"text-gray-600","dark:text-gray-400"],["message","Chargement...",3,"fullscreen"],["title","Erreur de chargement",3,"message"],["title","Erreur de chargement",3,"retry","message"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-8"],["routerLink","/candidatures/new",1,"card","hover:shadow-lg","transition-all","group","cursor-pointer","border-2","border-primary-200","dark:border-primary-800","hover:border-primary-400","dark:hover:border-primary-600"],[1,"flex","items-center","gap-4"],[1,"p-4","rounded-lg","bg-primary-100","dark:bg-primary-900/30","group-hover:bg-primary-200","dark:group-hover:bg-primary-800/50","transition-colors"],[1,"fas","fa-plus","text-3xl","text-primary-600","dark:text-primary-400"],[1,"text-left"],[1,"font-semibold","text-lg","text-gray-900","dark:text-white"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/candidatures",1,"card","hover:shadow-lg","transition-all","group","cursor-pointer","border-2","border-purple-200","dark:border-purple-800","hover:border-purple-400","dark:hover:border-purple-600"],[1,"p-4","rounded-lg","bg-purple-100","dark:bg-purple-900/30","group-hover:bg-purple-200","dark:group-hover:bg-purple-800/50","transition-colors"],[1,"fas","fa-list","text-3xl","text-purple-600","dark:text-purple-400"],["routerLink","/stats",1,"card","hover:shadow-lg","transition-all","group","cursor-pointer","border-2","border-blue-200","dark:border-blue-800","hover:border-blue-400","dark:hover:border-blue-600"],[1,"p-4","rounded-lg","bg-blue-100","dark:bg-blue-900/30","group-hover:bg-blue-200","dark:group-hover:bg-blue-800/50","transition-colors"],[1,"fas","fa-chart-bar","text-3xl","text-blue-600","dark:text-blue-400"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mb-8"],[1,"card"],[1,"card","mb-8"],[1,"card","text-center","py-12"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-8"],[1,"card","bg-gradient-to-br","from-blue-50","to-blue-100","dark:from-blue-900/20","dark:to-blue-800/20","border-blue-200","dark:border-blue-700","hover:shadow-lg","transition-all"],[1,"text-center"],[1,"text-3xl","font-bold","text-blue-600","dark:text-blue-400","mb-1"],[1,"text-sm","text-blue-700","dark:text-blue-300","font-medium"],[1,"card","bg-gradient-to-br","from-yellow-50","to-yellow-100","dark:from-yellow-900/20","dark:to-yellow-800/20","border-yellow-200","dark:border-yellow-700","hover:shadow-lg","transition-all"],[1,"text-3xl","font-bold","text-yellow-600","dark:text-yellow-400","mb-1"],[1,"text-sm","text-yellow-700","dark:text-yellow-300","font-medium"],[1,"card","bg-gradient-to-br","from-green-50","to-green-100","dark:from-green-900/20","dark:to-green-800/20","border-green-200","dark:border-green-700","hover:shadow-lg","transition-all"],[1,"text-3xl","font-bold","text-green-600","dark:text-green-400","mb-1"],[1,"text-sm","text-green-700","dark:text-green-300","font-medium"],[1,"card","bg-gradient-to-br","from-purple-50","to-purple-100","dark:from-purple-900/20","dark:to-purple-800/20","border-purple-200","dark:border-purple-700","hover:shadow-lg","transition-all"],[1,"text-3xl","font-bold","text-purple-600","dark:text-purple-400","mb-1"],[1,"text-sm","text-purple-700","dark:text-purple-300","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"card","bg-gradient-to-br","from-amber-50","to-orange-100","dark:from-amber-900/20","dark:to-orange-800/20","border-amber-200","dark:border-amber-700"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900","dark:text-white","flex","items-center","gap-2"],[1,"fas","fa-star","text-amber-600","dark:text-amber-400"],[1,"text-4xl","font-bold","text-amber-600","dark:text-amber-400","mb-2"],[1,"flex","justify-center","gap-1","mb-2"],[1,"fas","fa-star","text-xl",3,"text-amber-400","dark:text-amber-500","text-gray-300","dark:text-gray-600"],[1,"text-sm","text-amber-700","dark:text-amber-300"],[1,"fas","fa-file-contract","text-primary-600","dark:text-primary-400"],[1,"space-y-3"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500","dark:text-gray-400","text-center","py-4"],[1,"fas","fa-exclamation-triangle","text-primary-600","dark:text-primary-400"],[1,"fas","fa-star","text-xl"],[1,"text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"flex","items-center","gap-2"],[1,"w-24","h-2","bg-gray-200","dark:bg-gray-700","rounded-full","overflow-hidden"],[1,"h-full","rounded-full","transition-all","duration-300"],[1,"text-sm","font-semibold","text-gray-900","dark:text-white","w-12","text-right"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","flex","items-center","gap-2"],[1,"fas","fa-trophy","text-amber-600","dark:text-amber-400"],[1,"p-3","rounded-lg","bg-gray-50","dark:bg-gray-800","hover:bg-amber-50","dark:hover:bg-amber-900/20","transition-colors","cursor-pointer","border","border-transparent","hover:border-amber-200","dark:hover:border-amber-800",3,"routerLink"],[1,"flex-1"],[1,"font-semibold","text-gray-900","dark:text-white","mb-1"],[1,"flex","items-center","gap-1"],[1,"fas","fa-star","text-sm",3,"text-amber-400","text-gray-300"],[1,"fas","fa-star","text-sm"],[1,"fas","fa-flag","text-red-600","dark:text-red-400"],[1,"p-3","rounded-lg","bg-gray-50","dark:bg-gray-800","hover:bg-red-50","dark:hover:bg-red-900/20","transition-colors","cursor-pointer","border","border-transparent","hover:border-red-200","dark:hover:border-red-800",3,"routerLink"],[1,"flex","items-center","gap-3","text-sm","text-gray-600","dark:text-gray-400"],[1,"fas","fa-building","text-xs"],[1,"fas","fa-calendar","text-xs"],[3,"statut"],[1,"fas","fa-bell","text-orange-600","dark:text-orange-400"],[1,"p-3","rounded-lg","bg-gray-50","dark:bg-gray-800","hover:bg-orange-50","dark:hover:bg-orange-900/20","transition-colors","cursor-pointer","border","border-transparent","hover:border-orange-200","dark:hover:border-orange-800",3,"routerLink"],[1,"flex","items-center","gap-1","text-orange-600","dark:text-orange-400","font-medium"],[1,"fas","fa-clock","text-xs"],[1,"flex","items-center","justify-between","mb-6"],[1,"fas","fa-history","text-primary-600","dark:text-primary-400"],["routerLink","/candidatures",1,"text-primary-600","dark:text-primary-400","hover:text-primary-700","dark:hover:text-primary-300","text-sm","font-medium"],[1,"fas","fa-arrow-right","ml-1"],[1,"p-4","rounded-lg","bg-gray-50","dark:bg-gray-800","hover:bg-gray-100","dark:hover:bg-gray-700","transition-colors","cursor-pointer",3,"routerLink"],[1,"flex","items-center","gap-4","text-sm","text-gray-600","dark:text-gray-400"],[1,"fas","fa-map-marker-alt","text-xs"],[1,"fas","fa-briefcase","text-6xl","text-gray-300","dark:text-gray-600","mb-4"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-400","mb-6"],["routerLink","/candidatures/new",1,"btn-primary","cursor-pointer","disabled:cursor-not-allowed"],[1,"fas","fa-plus"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"i",3),n(4," Tableau de bord "),r(),i(5,"p",4),n(6,"Bienvenue ! Voici un aper\xE7u de votre activit\xE9"),r()(),b(7,re,1,1,"app-loading-spinner",5)(8,ie,1,1,"app-error-card",6)(9,_e,35,5),r()),e&2&&(o(7),v(d.isLoading()?7:d.errorMessage()?8:9))},dependencies:[q,B,V,z,J,Q],encapsulation:2,changeDetection:0})};export{X as DashboardComponent};
