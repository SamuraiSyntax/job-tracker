import{a as A}from"./chunk-7NERXNDC.js";import{b as O,c as Z}from"./chunk-R2XGUXF2.js";import"./chunk-SABFLBFF.js";import"./chunk-UTN363WZ.js";import{b as V,c as p,d as D,e as I,g as G,i as j,j as z,p as B,r as U,t as $}from"./chunk-R4UMKJBA.js";import{b as M}from"./chunk-LJWELZMP.js";import"./chunk-3VPM3Y2R.js";import{$ as w,B as g,Ia as x,M as a,Q as h,Ta as L,Ua as N,V as v,Za as k,_ as y,aa as S,ba as b,ca as C,da as m,ea as i,fa as o,fb as P,ga as n,gb as R,jb as q,lb as T,ma as f,pb as J,ua as E,wa as F,xa as l,y as u,ya as _}from"./chunk-KT62HJZU.js";var K=(s,t,r,e)=>({"bg-red-500":s,"bg-yellow-400":t,"bg-blue-400":r,"bg-green-500":e});function Q(s,t){if(s&1&&(i(0,"li"),l(1),o()),s&2){let r=t.$implicit;a(),_(r)}}function W(s,t){s&1&&(i(0,"div",33),l(1," Les mots de passe ne correspondent pas. "),o())}function X(s,t){s&1&&(n(0,"div",34),i(1,"span"),l(2,"Inscription en cours..."),o())}function Y(s,t){s&1&&(n(0,"i",35),i(1,"span"),l(2,"S'inscrire"),o())}var H=class s{fb=u(U);authService=u(M);router=u(P);notificationService=u(T);destroyRef=u(g);registerForm=this.fb.group({nom:["",[p.required,p.minLength(2),p.maxLength(50)]],prenom:["",[p.required,p.minLength(2),p.maxLength(50)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(8),J()]],confirmPassword:["",[p.required]]},{validators:this.passwordsMatchValidator});passwordsMatchValidator(t){let r=t.get("password")?.value,e=t.get("confirmPassword")?.value;return r&&e&&r!==e?{passwordsMismatch:!0}:null}get passwordStrength(){let t=this.registerForm.get("password")?.value||"",r=0;return t.length>=8&&r++,/[A-Z]/.test(t)&&r++,/[a-z]/.test(t)&&r++,/[0-9]/.test(t)&&r++,/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(t)&&r++,r}get passwordErrors(){let t=this.registerForm.get("password")?.errors;if(!t)return[];let r=[];return t.required&&r.push("Le mot de passe est requis."),t.minLength&&r.push("Au moins 8 caract\xE8res."),t.uppercase&&r.push("Au moins une majuscule."),t.lowercase&&r.push("Au moins une minuscule."),t.digit&&r.push("Au moins un chiffre."),t.special&&r.push("Au moins un caract\xE8re sp\xE9cial."),r}isLoading=!1;hidePassword=!0;async onSubmit(){if(this.registerForm.valid){this.isLoading=!0;let{nom:t,prenom:r,email:e,password:d}=this.registerForm.value;this.authService.register({nom:t,prenom:r,email:e,password:d}).pipe(A(this.destroyRef)).subscribe({next:c=>{this.authService.handleAuthentication(c),this.notificationService.success('Inscription r\xE9ussie ! Bienvenue <i class="fas fa-party-horn"></i>'),this.router.navigate(["/dashboard"])},error:c=>{this.notificationService.error(c.message||"Une erreur est survenue lors de l'inscription"),this.isLoading=!1}})}else this.markFormGroupTouched(this.registerForm),this.registerForm.errors?.passwordsMismatch?this.notificationService.warning("Les mots de passe ne correspondent pas"):this.notificationService.warning("Veuillez remplir correctement tous les champs")}markFormGroupTouched(t){Object.keys(t.controls).forEach(r=>{t.get(r)?.markAsTouched()})}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=h({type:s,selectors:[["app-register"]],decls:59,vars:21,consts:[["title","Inscription","subtitle","Cr\xE9ez votre compte Job Tracker"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","nom",1,"form-label"],[1,"relative"],["id","nom","type","text","formControlName","nom","required","","autocomplete","family-name","placeholder","Votre nom",1,"form-input","pl-10"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],[1,"fas","fa-user"],["fieldName","Le nom",3,"control"],["for","prenom",1,"form-label"],["id","prenom","type","text","formControlName","prenom","required","","autocomplete","given-name","placeholder","Votre pr\xE9nom",1,"form-input","pl-10"],[1,"far","fa-user"],["fieldName","Le pr\xE9nom",3,"control"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email","required","","autocomplete","email","placeholder","votre@email.com",1,"form-input","pl-10"],[1,"fas","fa-envelope"],["fieldName","L'email",3,"control"],["for","password",1,"form-label"],["id","password","formControlName","password","required","","autocomplete","new-password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input","pl-10","pr-10",3,"type"],[1,"fas","fa-lock"],["type","button","tabindex","-1",1,"absolute","right-3","top-1/2","-translate-y-1/2","text-gray-400","hover:text-gray-600","dark:hover:text-gray-200",3,"click"],[1,"mt-2"],[1,"h-2","rounded","bg-gray-200","dark:bg-gray-700","overflow-hidden"],[1,"h-2","transition-all",3,"ngClass"],[1,"text-xs","mt-1","text-gray-500","dark:text-gray-400"],["fieldName","Le mot de passe",3,"control"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","formControlName","confirmPassword","required","","autocomplete","new-password","placeholder","Confirmez le mot de passe",1,"form-input","pl-10","pr-10",3,"type"],["fieldName","La confirmation du mot de passe",3,"control"],["class","text-xs text-red-500 mt-1",4,"ngIf"],["type","submit",1,"btn-primary","w-full","cursor-pointer","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center","mt-4"],[1,"text-sm","text-gray-600","dark:text-gray-400"],["routerLink","/auth/login",1,"text-primary-600","hover:text-primary-700","dark:text-primary-400","dark:hover:text-primary-300","font-medium"],[1,"text-xs","text-red-500","mt-1"],[1,"animate-spin","rounded-full","border-2","border-white","border-t-transparent","w-5","h-5"],[1,"fas","fa-user-plus"]],template:function(r,e){if(r&1&&(i(0,"app-auth-card",0)(1,"form",1),f("ngSubmit",function(){return e.onSubmit()}),i(2,"div")(3,"label",2),l(4,"Nom"),o(),i(5,"div",3),n(6,"input",4),i(7,"span",5),n(8,"i",6),o()(),n(9,"app-form-field-error",7),o(),i(10,"div")(11,"label",8),l(12,"Pr\xE9nom"),o(),i(13,"div",3),n(14,"input",9),i(15,"span",5),n(16,"i",10),o()(),n(17,"app-form-field-error",11),o(),i(18,"div")(19,"label",12),l(20,"Email"),o(),i(21,"div",3),n(22,"input",13),i(23,"span",5),n(24,"i",14),o()(),n(25,"app-form-field-error",15),o(),i(26,"div")(27,"label",16),l(28,"Mot de passe"),o(),i(29,"div",3),n(30,"input",17),i(31,"span",5),n(32,"i",18),o(),i(33,"button",19),f("click",function(){return e.hidePassword=!e.hidePassword}),n(34,"i"),o()(),i(35,"div",20)(36,"div",21),n(37,"div",22),o(),i(38,"ul",23),b(39,Q,2,1,"li",null,S),o()(),n(41,"app-form-field-error",24),o(),i(42,"div")(43,"label",25),l(44,"Confirmer le mot de passe"),o(),i(45,"div",3),n(46,"input",26),i(47,"span",5),n(48,"i",18),o()(),n(49,"app-form-field-error",27),v(50,W,2,0,"div",28),o(),i(51,"button",29),y(52,X,3,0)(53,Y,3,0),o(),i(54,"div",30)(55,"p",31),l(56," Vous avez d\xE9j\xE0 un compte ? "),i(57,"a",32),l(58,"Se connecter"),o()()()()()),r&2){let d;a(),m("formGroup",e.registerForm),a(8),m("control",e.registerForm.get("nom")),a(8),m("control",e.registerForm.get("prenom")),a(8),m("control",e.registerForm.get("email")),a(5),m("type",e.hidePassword?"password":"text"),a(4),F(e.hidePassword?"far fa-eye-slash":"far fa-eye"),a(3),E("width",e.passwordStrength*20+"%"),m("ngClass",x(16,K,e.passwordStrength<=2,e.passwordStrength===3,e.passwordStrength===4,e.passwordStrength===5)),a(2),C(e.passwordErrors),a(2),m("control",e.registerForm.get("password")),a(5),m("type",e.hidePassword?"password":"text"),a(3),m("control",e.registerForm.get("confirmPassword")),a(),m("ngIf",(e.registerForm.errors==null?null:e.registerForm.errors.passwordsMismatch)&&((d=e.registerForm.get("confirmPassword"))==null?null:d.touched)),a(),m("disabled",e.isLoading),a(),w(e.isLoading?52:53)}},dependencies:[k,L,N,$,G,V,D,I,B,z,j,q,R,Z,O],encapsulation:2,changeDetection:0})};export{H as RegisterComponent};
