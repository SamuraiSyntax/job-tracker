import{d as U,e as z,f as N,g as j,h as O}from"./chunk-R2XGUXF2.js";import"./chunk-SABFLBFF.js";import{b as p}from"./chunk-LJWELZMP.js";import{$ as y,A as v,D as x,E as S,M as g,Na as A,Q as b,Za as M,_ as T,_a as k,bb as I,cb as V,da as E,ea as u,eb as D,fa as m,fb as d,ga as c,ib as P,j as _,ka as R,lb as f,ma as F,n as w,oa as l,va as H,y as o,z as C}from"./chunk-KT62HJZU.js";var s=(e,a)=>{let t=o(p),n=o(d),r=o(f);return t.isAuthenticated()?!0:(r.info("Veuillez vous connecter pour acc\xE9der \xE0 cette page."),n.navigate(["/auth/login"],{queryParams:{returnUrl:a.url}}),!1)};var L=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"auth/login",loadComponent:()=>import("./chunk-MIOCHO4H.js").then(e=>e.LoginComponent)},{path:"auth/register",loadComponent:()=>import("./chunk-VDBXNFBO.js").then(e=>e.RegisterComponent)},{path:"auth/forgot-password",loadComponent:()=>import("./chunk-ISDA5P2X.js").then(e=>e.ForgotPasswordComponent)},{path:"auth/reset-password",loadComponent:()=>import("./chunk-Q5LVWRTB.js").then(e=>e.ResetPasswordComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-FAAJOQFC.js").then(e=>e.DashboardComponent),canActivate:[s]},{path:"profile",loadComponent:()=>import("./chunk-IGDNYKSD.js").then(e=>e.ProfileComponent),canActivate:[s]},{path:"settings",loadComponent:()=>import("./chunk-UZGJKOLQ.js").then(e=>e.SettingsComponent),canActivate:[s]},{path:"stats",loadComponent:()=>import("./chunk-3PT6C2LO.js").then(e=>e.CandidatureStatsComponent),canActivate:[s]},{path:"candidatures",canActivate:[s],children:[{path:"",loadComponent:()=>import("./chunk-2FTKRX2X.js").then(e=>e.CandidatureListComponent)},{path:"new",loadComponent:()=>import("./chunk-KTJ5QAJ3.js").then(e=>e.CandidatureFormComponent)},{path:":id",loadComponent:()=>import("./chunk-XOSJDDW3.js").then(e=>e.CandidatureDetailComponent)},{path:":id/edit",loadComponent:()=>import("./chunk-KTJ5QAJ3.js").then(e=>e.CandidatureFormComponent)}]},{path:"**",redirectTo:"/dashboard"}];var G=(e,a)=>{let n=o(p).getToken();return!n&&!e.url.includes("/auth/")&&console.warn("[JWT] Pas de token JWT pour la requ\xEAte:",e.url),n&&(e=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),a(e)};var J=(e,a)=>{let t=o(d),n=o(p),r=o(f);return a(e).pipe(w(i=>(i.status===401?!e.url.includes("/stats/")&&i.error?.message!=="Endpoint not found"?(n.logout(),t.navigate(["/auth/login"]),r.error("Session expir\xE9e. Veuillez vous reconnecter.")):console.warn("[AUTH] Endpoint non disponible:",e.url):i.status===403?(r.error("Acc\xE8s refus\xE9. Vous n'avez pas les permissions n\xE9cessaires."),t.navigate(["/dashboard"])):i.status===404?console.warn("[HTTP] Ressource non trouv\xE9e:",e.url):i.status===429||typeof i.error?.message=="string"&&i.error.message.toLowerCase().includes("trop de tentatives")?r.error("Compte temporairement bloqu\xE9 apr\xE8s trop de tentatives. R\xE9essayez dans 15 minutes."):i.status===500?r.error("Erreur serveur. Veuillez r\xE9essayer plus tard."):i.status===0&&r.error("Erreur de connexion. V\xE9rifiez votre connexion internet."),_(()=>i))))};var B={providers:[x(),P(L),I(V([G,J]))]};function W(e,a){if(e&1){let t=R();u(0,"div",1)(1,"app-header",2),F("toggleMenu",function(){C(t);let r=l();return v(r.toggleSidenav())})("logoutClick",function(){C(t);let r=l();return v(r.logout())}),m(),u(2,"div",3)(3,"aside",4,0),c(5,"app-sidebar"),m(),u(6,"main",5),c(7,"router-outlet")(8,"app-footer"),m()(),c(9,"app-toast")(10,"app-confirmation-modal"),m()}if(e&2){let t=l();g(),E("currentUser",t.currentUser())("appTitle",t.title()),g(2),H("hidden",!t.sidenavOpen)}}function $(e,a){e&1&&c(0,"router-outlet")(1,"app-toast")(2,"app-confirmation-modal")}var h=class e{authService=o(p);title=S("Job Tracker");isAuthenticated=A(()=>this.authService.isAuthenticated());currentUser=A(()=>this.authService.getCurrentUser());sidenavOpen=!0;toggleSidenav(){this.sidenavOpen=!this.sidenavOpen}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-root"]],decls:2,vars:1,consts:[["sidenav",""],[1,"flex","flex-col","h-screen"],[3,"toggleMenu","logoutClick","currentUser","appTitle"],[1,"flex","flex-1","overflow-hidden"],[1,"w-64","bg-white","dark:bg-gray-800","border-r","border-gray-200","dark:border-gray-700","overflow-y-auto"],[1,"flex-1","overflow-y-auto","bg-gray-50","dark:bg-gray-900"]],template:function(t,n){t&1&&T(0,W,11,4,"div",1)(1,$,3,0),t&2&&y(n.isAuthenticated()?0:1)},dependencies:[M,D,U,z,N,j,O],encapsulation:2})};k(h,B).catch(e=>console.error(e));
