<!-- Filtre par type de contrat -->
<div class="lg:w-auto flex-auto">
  <div class="relative">
    <button type="button" (click)="toggleTypeContratDropdown()"
      class="input px-4 w-full text-left cursor-pointer transition-all duration-200 hover:border-gray-400 dark:hover:border-gray-500 flex items-center justify-between"
      [class.ring-2]="showTypeContratDropdown()" [class.ring-primary-500]="showTypeContratDropdown()"
      [class.dark:ring-primary-400]="showTypeContratDropdown()" [class.border-primary-500]="showTypeContratDropdown()"
      [class.dark:border-primary-400]="showTypeContratDropdown()">
      <div class="flex items-center gap-3 flex-1 min-w-0">
        <i class="fas fa-file-contract text-gray-400 transition-all"
          [class.text-primary-600]="showTypeContratDropdown()" [class.dark:text-primary-400]="showTypeContratDropdown()"
          [class.scale-110]="showTypeContratDropdown()"></i>
        @if (selectedTypeContrat()) {
        <span class="px-2 py-1 rounded-full text-xs font-medium truncate"
          [class]="getTypeContratBadgeClass(selectedTypeContrat())">
          {{ getTypeContratLabelOrAll(selectedTypeContrat()) }}
        </span>
        } @else {
        <span class="text-gray-600 dark:text-gray-400 truncate">Tous les types</span>
        }
      </div>
      <i class="ml-2 fas fa-chevron-down text-gray-400 text-xs transition-transform duration-200"
        [class.rotate-180]="showTypeContratDropdown()"></i>
    </button>

    @if (showTypeContratDropdown()) {
    <div
      class="absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[9999] animate-in slide-in-from-top-2 fade-in duration-200 overflow-hidden max-h-96 overflow-y-auto custom-scrollbar">
      <button type="button" (click)="selectTypeContrat('')"
        class="w-full cursor-pointer px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150 flex items-center gap-3"
        [class.bg-primary-50]="!selectedTypeContrat()" [class.dark:bg-primary-900/20]="!selectedTypeContrat()">
        <i class="fas fa-list text-gray-400"></i>
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Tous les types</span>
        @if (!selectedTypeContrat()) {
        <i class="fas fa-check text-primary-600 dark:text-primary-400 ml-auto"></i>
        }
      </button>
      <div class="border-t border-gray-200 dark:border-gray-700"></div>
      @for (type of typesContrat; track type) {
      <button type="button" (click)="selectTypeContrat(type)"
        class="w-full cursor-pointer px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150 flex items-center gap-3"
        [class.bg-primary-50]="selectedTypeContrat() === type"
        [class.dark:bg-primary-900/20]="selectedTypeContrat() === type">
        <span class="px-2 py-1 rounded-full text-xs font-medium" [class]="getTypeContratBadgeClass(type)">
          {{ getTypeContratLabel(type) }}
        </span>
        @if (selectedTypeContrat() === type) {
        <i class="fas fa-check text-primary-600 dark:text-primary-400 ml-auto"></i>
        }
      </button>
      }
    </div>
    }
  </div>
</div>