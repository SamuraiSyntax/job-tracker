<div class="relative card px-4 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex flex-col justify-between group gap-2 overflow-hidden"
    [ngClass]="{
    'bg-neutral-100/70 dark:bg-neutral-900/70 opacity-70': candidature.archivee,
    'hover:opacity-100': candidature.archivee}">
    @if(candidature.archivee) {
    <span
        class="absolute bottom-0 left-0 z-10 p-2 text-xs font-semibold bg-stone-200 dark:bg-stone-700 text-stone-900 dark:text-stone-100 border border-stone-400 dark:border-stone-600 shadow"
        aria-label="Candidature archivée" title="Candidature archivée">
        <i class="fas fa-archive"></i>
    </span>
    }
    <div class=" flex flex-col gap-2">
        <div class="flex items-center gap-2 mb-2">
            <span
                class="inline-block px-2 py-1 rounded text-xs font-bold bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300">
                #{{ candidature.id }}
            </span>
            <span class="text-xs text-gray-400 flex-1">{{ candidature.dateCandidature | timeAgo }}</span>
            <span class="flex-end px-2 py-1 rounded-lg text-xs font-bold"
                [class]="getTypeContratBadgeClass(candidature.typeContrat ?? TypeContrat.CDI)">
                {{ getTypeContratLabel(candidature.typeContrat ?? TypeContrat.CDI) }}
            </span>
        </div>
        <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-1 truncate">
            {{ candidature.poste }}
        </h2>
        <div class="text-sm text-gray-700 dark:text-gray-300 truncate">
            <i class="fas fa-building mr-1"></i>
            {{ candidature.entreprise }}
        </div>
        <div class="text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1">
            <i class="fas fa-map-marker-alt"></i>
            {{ candidature.localisation || '-' }}
        </div>
        <div class="flex gap-2 mt-2">
            <span class="status-badge" [class]="getStatutBadgeClass(candidature.statut)">
                {{ getStatutLabel(candidature.statut) }}
            </span>
            <span class="px-2 py-1 rounded-full text-xs font-medium"
                [class]="getPrioriteBadgeClass(candidature.priorite ?? Priorite.BASSE)">
                {{ getPrioriteLabel(candidature.priorite ?? Priorite.BASSE) }}
            </span>
        </div>
    </div>
    <div class="flex items-center justify-center gap-2 border-t pt-2 border-gray-100 dark:border-gray-800">
        <button [routerLink]="['/candidatures', candidature.id]"
            class="px-2 py-1 rounded-lg text-gray-600 dark:text-gray-400 hover:text-white hover:bg-primary-600 dark:hover:bg-primary-500 transition-all duration-200 hover:scale-110 hover:shadow-lg cursor-pointer disabled:cursor-not-allowed"
            title="Voir les détails">
            <i class="fas fa-eye text-sm"></i>
        </button>
        <button (click)="onArchive.emit(candidature.id)"
            class="px-2 py-1 rounded-lg text-gray-600 dark:text-gray-400 hover:text-white hover:bg-yellow-500 dark:hover:bg-yellow-600 transition-all duration-200 hover:scale-110 hover:shadow-lg cursor-pointer disabled:cursor-not-allowed"
            [title]="candidature.archivee ? 'Désarchiver' : 'Archiver'">
            <i [class]="candidature.archivee ? 'fas fa-box-open text-sm' : 'fas fa-archive text-sm'"></i>
        </button>
        <button (click)="onDeleteFromTable.emit(candidature.id)"
            class="px-2 py-1 rounded-lg text-gray-600 dark:text-gray-400 hover:text-white hover:bg-red-600 dark:hover:bg-red-500 transition-all duration-200 hover:scale-110 hover:shadow-lg cursor-pointer disabled:cursor-not-allowed"
            title="Supprimer">
            <i class="fas fa-trash text-sm"></i>
        </button>
    </div>
</div>