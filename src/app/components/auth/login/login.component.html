<app-auth-card title="Connexion" subtitle="Connectez-vous à votre compte Job Tracker">
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <div>
      <label for="email" class="form-label">Email</label>
      <div class="relative">
        <input id="email" type="email" formControlName="email" required autocomplete="email" class="form-input pl-10"
          placeholder="votre@email.com">
        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"><i class="fas fa-envelope"></i></span>
      </div>
      <app-form-field-error [control]="loginForm.get('email')" fieldName="L'email" />
    </div>

    <div>
      <label for="password" class="form-label">Mot de passe</label>
      <div class="relative">
        <input id="password" [type]="hidePassword ? 'password' : 'text'" formControlName="password" required
          autocomplete="current-password" class="form-input pl-10 pr-10" placeholder="••••••••">
        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"><i class="fas fa-lock"></i></span>
        <button type="button" (click)="hidePassword = !hidePassword"
          class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
          <i [class]="hidePassword ? 'far fa-eye-slash' : 'far fa-eye'"></i>
        </button>
      </div>
      <app-form-field-error [control]="loginForm.get('password')" fieldName="Le mot de passe" />
    </div>

    <button type="submit" [disabled]="isLoading" class="btn-primary w-full cursor-pointer disabled:cursor-not-allowed">
      @if (isLoading) {
      <div class="animate-spin rounded-full border-2 border-white border-t-transparent w-5 h-5"></div>
      <span>Connexion...</span>
      } @else {
      <i class="fas fa-sign-in-alt"></i>
      <span>Se connecter</span>
      }
    </button>

    <div class="text-center mt-2">
      <a routerLink="/auth/forgot-password"
        class="text-sm text-indigo-600 hover:underline focus:outline-none focus:underline">
        Mot de passe oublié&nbsp;?
      </a>
    </div>
    <div class="text-center mt-4">
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Pas encore de compte ?
        <a routerLink="/auth/register"
          class="text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium">Inscrivez-vous</a>
      </p>
    </div>
  </form>
</app-auth-card>